<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>포폴</title>
    
    <link rel="stylesheet" href="../resource/css/com/jquery-ui.css">
    <link rel="stylesheet" href="../resource/css/com/reset.css">
    <link rel="stylesheet" href="../resource/css/com/common.css">
    <!-- <link rel="stylesheet" href="../resource/css/com/style.css"> -->
    <link rel="stylesheet" href="../resource/css/page/main3.css">
</head>
<body>
  <div class="wrapper">
    <header id="header">
      <div class="header-inner">
        <h1>
          <a href="javascript:void(0);">
            PARK JAEMINs
            <em>PORTFOLIO</em>
          </a>
        </h1>
        <nav>
          <a href="javascript:void(0);">프로젝트 문의</a>
          <a href="javascript:void(0);" class="full-menu" title="전체메뉴 열기">
            <span class="line l1"></span>
            <span class="line l2"></span>
          </a>
        </nav>
      </div>
    </header>
    <div id="wrap" class="content">
      <div id="parallax__nav">
        <ul>
            <li><a href="#section1" class="active">s1</a></li>
            <li><a href="#section2">s2</a></li>
            <li><a href="#section3">s3</a></li>
            <li><a href="#section4">s4</a></li>
            <li><a href="#section5">s5</a></li>
        </ul>
      </div>

      <div id="" class="scrollWrapper">
        <!-- 메인 -->
        <section id="section1" class="home-section section1">
            <div class="imgbox">
                <img src="../resource/img/page/main/planets1.png" class="img1">
                <img src="../resource/img/page/main/planets2.png"  class="img2">
                <!-- <img src="../resource/img/page/main/planets3.png" class="">
                <img src="../resource/img/page/main/planets4.png" class="">
                <img src="../resource/img/page/main/planets5.png" class="">
                <img src="../resource/img/page/main/smile.png"  class=""> -->

                <img src="../resource/img/page/main/stars.png"  class="img3">
                <img src="../resource/img/page/main/star.png"  class="img3 move">
            </div>
            <div class="project-desc">
              <h3 class="project-title">
                  <p>PORT<br/><em>FOLIO</em></p>
              </h3>
          </div>
        </section>

        <!-- about me -->
        <section id="section2" class="home-section section2">
          <div class="imgbox">
            <img src="../resource/img/page/main/star.png" class="img3 move">
          </div>
          <div class="section2-profile">
            <div class="profile-img">
              <img src="../resource/img/page/main/profile2.png">
              <em></em>
            </div>
            <div class="profile-name">
              <p class="">PARKJAEMIN</p>
              <p class="">PARKJAEMIN</p>
              <p class="">PARKJAEMIN</p>
              <p class="">PARKJAEMIN</p>
              <p class="">PARKJAEMIN</p>
            </div>
          </div>
        </section>

        <!-- career 세로스크롤 -->
        <section id="section3" class="home-section section3" style="display:none">
          <img src="../resource/img/page/main/section1.jpg" class="home-section-bg">
        </section>

        <!-- portfolio 가로 스크롤 -->
        <section id="section4" class="home-section section4" style="display:none">
          <div class="section-inner">
            <div class="section-title">PORTFOLIO</div>
            <div class="section-desk">
            <div id="parallax__cont">
              <div class="parallax__item"></div>
              <div class="parallax__item"></div>
              <div class="parallax__item"></div>
              <div class="parallax__item"></div>
              <div class="parallax__item"></div>
            </div>
          </div>
        </section>

        <!-- contact 아무효과 -->
        <section id="section5" class="home-section section5" style="display:none">
          <img src="../resource/img/page/main/section4.jpg" class="home-section-bg">
          <a href="javascript:void(0);" class="project-desc">
            <h3 class="project-title">
              <div class="sentence line">
                <div>
                  <span style="--i:1">S</span>
                  <span style="--i:2">E</span>
                  <span style="--i:3">C</span>
                  <span style="--i:4">T</span>
                  <span style="--i:5">I</span>
                  <span style="--i:6">O</span>
                  <span style="--i:7">N</span>
                </div>
                <div>
                  <span style="--i:8">0</span>
                  <span style="--i:9">1</span>
                </div>
              </div>
              <div class="sentence filled">
                <div>
                  <span style="--i:1">S</span>
                  <span style="--i:2">E</span>
                  <span style="--i:3">C</span>
                  <span style="--i:4">T</span>
                  <span style="--i:5">I</span>
                  <span style="--i:6">O</span>
                  <span style="--i:7">N</span>
                </div>
                <div>
                  <span style="--i:8">0</span>
                  <span style="--i:9">1</span>
                </div>
              </div>
            </h3>
          </a>
        </section>
      </div>
    </div>
    <footer id="footer">
      <div class="footer-inner">
        <h2><a href="javascript:void(0);"><img src="" alt=""></a></h2>
      </div>
    </footer>

  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/ScrollTrigger.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.1/ScrollToPlugin.min.js"></script>
  <script>
    //section1 별 움직임
    const section1Move = document.querySelector("#section1 .imgbox .move");
    gsap.from(section1Move,{
      duration: 10,
      x: "-500px",
      y: "-350px",
      rotation: 360,
      scale: 0,
      autoAlpha: 0,

      scrollTrigger:{
        trigger: "#section1",
        start: "top top",
        end: "top+=1000",       
        scrub: true,
        pin: true,
        markers: false,
      }
    });

    gsap.to(section1Move,{
      duration: 1,
      scale: 10,
      rotation: 360,

      scrollTrigger:{
        trigger: "#section1",
        start: "top+=100",
        end: "top+=2000",
        //end: "top+=1000 bottom",
        //end: "bottom bottom",
        scrub: true,
        pin: true,
        anticipatePin: 1,
      }
    });

    // const ani6 = gsap.timeline(); //애니메이션을 순차적으로 진행시킴
    // ani6.to("#section1 .imgbox .move", {
    //   scale: 10, 
    //   rotation: 360, 
    //   duration: 10,
    //   onComplete: function() {
    //     console.log("애니메이션이 끝났습니다.");
    //     ScrollTrigger.update({ end: "top 5000px" });
    //   }
    // })
    
    // ScrollTrigger.create({
    //     animation: ani6,
    //     trigger: "#section1",
    //     start: "top+=100",
    //     endTrigger: "#section2",
    //     end: "+=1000px",
    //     scrub: true,
    //     pin: true,
    //     anticipatePin: 1,
    //     markers: true
    // });

    const section2Move = gsap.timeline(); //애니메이션을 순차적으로 진행시킴
    section2Move.to("#section2 .imgbox .move", {
      scale: 1, 
      duration: 1, 
      width: "0",
      height: "0",
      autoAlpha: "1",
    })
    
    ScrollTrigger.create({
        animation: section2Move,
        trigger: "#section2",
        start: "top",
        end: "+=5000px",
        scrub: true,
        pin: true,
        anticipatePin: 1,
        markers: false
    });
    

    
    //section2
    // const section2Move = document.querySelector("#section2 .imgbox .move");
    // gsap.to(section2Move,{
    //   duration: 1,
    //   width: "0",
    //   height: "0",

    //   scrollTrigger:{
    //     trigger: "#section2",
    //     start: "top",
    //     end: "top+=5000 bottom",
    //     scrub: true,
    //     pin: true
    //   }
    // });

    // const section2Move = gsap.timeline();
    // section2Move.to("#section2 .imgbox .move", {width: 0,height:0, rotation: 360, duration: 2})
    //             .to("#section2 .imgbox .move", {autoAlpha: 0})
    
    // ScrollTrigger.create({
    //     animation: section2Move,
    //     trigger: "#section2",
    //     start: "top top",
    //     end: "+=4000",
    //     scrub: true,
    //     pin: true,
    //     anticipatePin: 1,
    //     markers: true
    // });
    
    

    // const section2_profile = document.querySelector(".section2-profile .profile-img");
    // gsap.to(section2_profile,{
    //   duration: 5,
    //   width: "50vw",
    //   height: "50vw",
    //   x: -2000,
    //   y: 1500,
    //   autoAlpha: 1,
    //   scale: 3,
      
    //   scrollTrigger:{
    //     trigger: "#section2",
    //     start: "top bottom",
    //     end: "top+=20000 bottom",
    //     scrub: true,
    //     pin: true,
    //     pinSpacing: true,
    //     markers: true
    //   }
    // });

    // const section2_profile_name = document.querySelector(".section2-profile .profile-name");
    // gsap.from(section2_profile_name,{
    //   duration: 1,
    //   width: "50vw",
    //   height: "50vw",
    //   x: 2000,
    //   y: 1500,
    //   autoAlpha: 1,
    //   scale: 3,
      
    //   scrollTrigger:{
    //     trigger: "#section2",
    //     start: "top+=1000 bottom",
    //     end: "top+=20000 bottom",
    //     scrub: true,
    //     pin: true,
    //     pinSpacing: true,
    //     markers: false
    //   }
    // });
      

    //section3 세로 스크롤
    // const parallax3 = document.querySelector("#section3 .section-desk");
    // ScrollTrigger.create({
    //     trigger: parallax3,
    //     start: "top top",
    //     end: "bottom bottom",
    //     pin: true,
    //     pinSpacing: false,
    //     markers: false,
    //     scrub: true
    // });
    
    
    //section5 가로 스크롤
    let sections = gsap.utils.toArray("#section4 .parallax__item");
    gsap.to(sections, {
        xPercent: -100 * (sections.length -1),
        ease: "none",
        scrollTrigger: {
            trigger: "#section4",
            pin: true,
            scrub: 1,
            //snap: 1 / (sections.length -1),
            start: "top top",
            //end: "bottom top",
            end: "+=6000",
            markers: false
            // end: document.querySelector("#parallax__cont").offsetWidth
        }
    })



    //nav기능
    let links = gsap.utils.toArray("#parallax__nav ul li a");
    links.forEach(link => {
        let element = document.querySelector(link.getAttribute("href"));
        let linkST = ScrollTrigger.create({
            trigger: element,
            start: "top top"
        });

        ScrollTrigger.create({
            trigger: element,
            start: "top center",
            end: "bottom center",
            onToggle: self => setActive(link)
        });

        link.addEventListener("click", e => {
            e.preventDefault();
            gsap.to(window, {duration: 1, scrollTo: linkST.start, overwrite: "auto"});
        })
    });

    function setActive(link){
        links.forEach(el => el.classList.remove("active"));
        link.classList.add("active");
    }
  </script>
</body>
</html>